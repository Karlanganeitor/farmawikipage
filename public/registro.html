<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Usuario</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script>
        async function registerUser() {
            const nombre_usuario = document.getElementById('nombre_usuario').value;
            const correo_elec = document.getElementById('correo_elec').value;
            const contrasena = document.getElementById('contrasena').value;

            if (!nombre_usuario || !correo_elec || !contrasena) {
                alert('Por favor, completa todos los campos.');
                return;
            }

            try {
                const response = await fetch('http://localhost:3000/registro', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ nombre_usuario, correo_elec, contrasena })
                });

                const data = await response.json();
                
                if (response.status === 201) {
                    alert('Usuario registrado exitosamente. Inicia sesión.');
                    window.location.href = "/login.html";
                } else {
                    alert('Error: ' + data.message);
                }
            } catch (error) {
                console.error('Error en la solicitud:', error);
            }
        }
    </script>
    <script> // validar formato email
      function validateEmail(email) {
          const re = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
          return re.test(email);
      }
  
      async function registerUser() {
          const nombre_usuario = document.getElementById('nombre_usuario').value;
          const correo_elec = document.getElementById('correo_elec').value;
          const contrasena = document.getElementById('contrasena').value;
  
          if (!nombre_usuario || !correo_elec || !contrasena) {
              alert('Por favor, completa todos los campos.');
              return;
          }
  
          if (!validateEmail(correo_elec)) {
              alert('Por favor, ingresa un correo electrónico válido.');
              return;
          }
  
          try {
              const response = await fetch('http://localhost:3000/registro', {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json'
                  },
                  body: JSON.stringify({ nombre_usuario, correo_elec, contrasena })
              });
  
              const data = await response.json();
              
              if (response.status === 201) {
                  alert('Usuario registrado exitosamente. Inicia sesión.');
                  window.location.href = "/login.html";
              } else {
                  alert('Error: ' + data.message);
              }
          } catch (error) {
              console.error('Error en la solicitud:', error);
          }
      }
  </script>
  <script> // ------------Validar formato password
    function validatePassword(password) {
        const re = /^(?=.*[A-Z])(?=.*\d).{8,}$/; // Al menos 8 caracteres, una mayúscula y un número
        return re.test(password);
    }

    async function registerUser() {
        const nombre_usuario = document.getElementById('nombre_usuario').value;
        const correo_elec = document.getElementById('correo_elec').value;
        const contrasena = document.getElementById('contrasena').value;

        if (!nombre_usuario || !correo_elec || !contrasena) {
            alert('Por favor, completa todos los campos.');
            return;
        }

        if (!validateEmail(correo_elec)) {
            alert('Por favor, ingresa un correo electrónico válido.');
            return;
        }

        if (!validatePassword(contrasena)) {
            alert('La contraseña debe tener al menos 8 caracteres, una letra mayúscula y un número.');
            return;
        }

        try {
            const response = await fetch('http://localhost:3000/registro', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ nombre_usuario, correo_elec, contrasena })
            });

            const data = await response.json();
            
            if (response.status === 201) {
                alert('Usuario registrado exitosamente. Inicia sesión.');
                window.location.href = "/login.html";
            } else {
                alert('Error: ' + data.message);
            }
        } catch (error) {
            console.error('Error en la solicitud:', error);
        }
    }
</script>

</head>
<body>
    <nav class="navbar navbar-light  naranjo-01">
        <div class="container-fluid">
          <a class="navbar-brand" href="login.html">
            <img src="imagenes/capsule.svg" alt="" width="30" height="24" class="d-inline-block align-text-top">
            FarmaWiki
          </a>
        </div>
    </nav>

    <div class="contenedor-columnas">
        <!-- espaciador-->
     </div>
 
    <h2>Registro de Usuario</h2>
    <div class="container">
        <div class="row">
          <div class="col-8 mx-auto">
            <div class="card">
              <div class="card-body">
                <form onsubmit="event.preventDefault(); registerUser();">
                  <div class="row">
      
                    <div class="col-md-12">
      
                      <div class="mb-3">
                        <label for="nombreCompleto" class="form-label">Nombre completo:</label>
                        <input type="text" class="form-control bg-light" placeholder="Ej: Juan Juan Gongalez Gonzalez" id="nombre_usuario" required>
                      </div>
  
                      <div class="mb-3">
                        <label for="email" class="form-label">Email:</label>
                        <input type="email" class="form-control bg-light" placeholder="Ej: micompañoa@correo.cl" id="correo_elec" required>
                      </div>
  
                      <div class="mb-3">
                        <label for="contraseña" class="form-label">Contraseña:</label>
                        <input type="password" class="form-control bg-light" placeholder="Ej: ********" id="contrasena" required>
                      </div>
      
                    </div>
      
                  </div>
                  <div class="accordion accordion-flush mx-auto" id="accordionFlushExample">
                    <div class="accordion-item">
                      <h2 class="accordion-header">
                        <button class="accordion-button collapsed text-center" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                          Términos y condiciones de uso
                        </button>
                      </h2>
                      <div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body"><h1>Términos y Condiciones de Uso</h1>
                          <h2>Advertencias y Exenciones de Responsabilidad</h2>
                          <br>
                          <h3>1. Uso Responsable de la Información</h3>
                          <br>
                          <p class="texto_01 ">
                              La información proporcionada en esta página web tiene como único propósito brindar orientación general sobre medicamentos, alergias y temas relacionados. Bajo ninguna circunstancia debe considerarse como un sustituto de asesoramiento médico, diagnóstico o tratamiento profesional.
                          </p>
                          <br>
                          <h3>2. Riesgos de la Automedicación</h3>
                          <br>
                          <p class="texto_01 ">
                          <p class="texto_01 ">
                              La automedicación puede poner en peligro su salud o agravar sus condiciones existentes. Los usuarios <strong>deben consultar siempre a un médico calificado o farmacéutico</strong> antes de consumir cualquier medicamento, incluso si coincide con los síntomas descritos en este sitio.
                          </p>
                          <br>
                          <h3>3. Limitaciones de la Información</h3>
                          <br>
                          <ul  class="texto_01 ">
                              <li>La información contenida en esta web podría no estar completamente actualizada, completa o ser específica para sus necesidades médicas.</li>
                              <li>No nos hacemos responsables de los resultados adversos, reacciones alérgicas o efectos secundarios que puedan derivarse del uso de medicamentos basados en información obtenida aquí.</li>
                              <li>Las descripciones de medicamentos, componentes y alergias pueden variar según la región, normativa o actualización científica.</li>
                          </ul>
                          <br>
                          <h3>4. Exclusión de Responsabilidad Legal</h3>
                          <br>
                          <ul class="texto_01 ">
                              <li>Esta web y sus administradores no asumen responsabilidad alguna por decisiones de salud tomadas por los usuarios en función de la información obtenida aquí.</li>
                              <li>No somos responsables por errores, omisiones o interpretaciones incorrectas del contenido.</li>
                              <li>El uso de esta web implica que el usuario entiende y acepta que cualquier acción tomada con base en su contenido es bajo su propia responsabilidad y riesgo.</li>
                          </ul>
                          <br>
                          <h3>5. Uso Apropiado de la Plataforma</h3>
                          <br>
                          <p class="texto_01 ">
                              Esta plataforma está diseñada para complementar la consulta médica profesional, no para reemplazarla. Las decisiones de tratamiento, dosificación o cambios en medicamentos deben ser supervisadas por un profesional calificado.
                          </p>
                          <br>
                          <h3>6. Publicidad y Contenido Externo</h3>
                          <br>
                          <ul class="texto_01 ">
                              <li>Esta página podría incluir referencias a medicamentos, laboratorios o recursos externos. Dichas referencias no constituyen un aval de su efectividad o seguridad.</li>
                              <li>No somos responsables por la información proporcionada en enlaces externos o materiales promocionados en la web.</li>
                          </ul>
                          <br>
                          <h3>7. Protección de Datos y Privacidad</h3>
                          <br>
                          <p class="texto_01 ">
                              La información personal proporcionada por los usuarios será tratada con estricta confidencialidad, en cumplimiento con las leyes locales de protección de datos. El usuario es responsable de garantizar que la información ingresada en la plataforma sea precisa y completa.
                          </p>
                          <br>
                          <h3>8. Recomendación de Consulta Médica</h3>
                          <br>
                          <p class="texto_01 ">
                              Le recordamos que solo un profesional de la salud puede evaluar adecuadamente su situación médica y proporcionar un tratamiento acorde a sus necesidades particulares. Esta plataforma <strong>no reemplaza en ningún caso la consulta presencial o virtual con un médico o farmacéutico autorizado</strong>.
                          </p>
                          <br>
                          <h3>9. Modificaciones y Cambios</h3>
                          <br>
                          <p class="texto_01 ">
                              Nos reservamos el derecho de modificar estos términos y condiciones en cualquier momento. Se recomienda revisarlos periódicamente para asegurarse de comprender las condiciones de uso de esta página.
                          </p>
                          <br>
                          <h3>10. Aceptación de los Términos</h3>
                          <br>
                          <p class="texto_01 ">
                              Al utilizar este sitio, el usuario declara que ha leído, entendido y aceptado estos términos y condiciones en su totalidad. Si no está de acuerdo con alguno de los puntos, le solicitamos que no utilice la plataforma.
                          </p>
                          <br>
                          <p class="texto_01 "><strong>Aviso Final:</strong> El objetivo de esta plataforma es facilitar el acceso a información médica general de manera responsable y ética. Hacemos todo lo posible por garantizar que el contenido sea confiable, pero <strong>el usuario asume toda la responsabilidad por su uso.</strong></p></div>
                      </div>
                    </div>
  
                    <div class="mb-3">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="aceptoTerminos" required data-error="Debes aceptar los términos y condiciones del sitio web">
                        <label class="form-check-label" for="aceptoTerminos" style="vertical-align: middle;">Acepto los términos y condiciones de sitio web</label>
                      </div>
                      <div class="invalid-feedback" id="errorAceptoTerminos"></div>
                    </div>
                    
                  <button type="submit" class="btn btn-primary naranjo-02 border-0 btn-lg w-100">Enviar</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>


    <br>
    <button onclick="window.location.href='/login.html'">Volver al inicio de sesión</button>

    <div class="contenedor-columnas">
        <!-- espaciador -->
      </div>
        
      <button class="btn btn-link gris-oscuro position-fixed bottom-0 end-0 m-3" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">
        <i class="bi bi-question-circle"></i> Ayuda
      </button>
      
      <div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel">
        <div class="offcanvas-header">
          <button type="button" class="btn-close text-reset ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body small">
          <div class="row">
            <div class="col-8 mx-auto">
              <h6>¿Necesitas ayuda o tienes preguntas?</h6>
              <li>Teléfono: +56 9 1234 5678 (Disponible de lunes a viernes, de 9:00 a 18:00 hrs.)</li>
              <li>Correo electrónico: soporte@ciudaddelmar.cl (Tiempo de respuesta promedio: 24 horas)</li>
            </div>
          </div>
        </div>
      </div>
  
  
  
      <!-- Optional JavaScript; choose one of the two! -->
  
      <!-- Bootstrap Bundle with Popper -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  
    
</body>
</html>
